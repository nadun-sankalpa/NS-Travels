<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Login - Travel Agency</title>
    <link rel="stylesheet" href="css/auth-colorful.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="auth-container user-login">
        <div class="auth-background">
            <div class="bg-shape shape-1"></div>
            <div class="bg-shape shape-2"></div>
            <div class="bg-shape shape-3"></div>
            <div class="bg-shape shape-4"></div>
            <div class="light-ray ray-1"></div>
            <div class="light-ray ray-2"></div>
            <div class="light-ray ray-3"></div>
            <div class="light-glow glow-1"></div>
            <div class="light-glow glow-2"></div>
        </div>
        
        <div class="auth-wrapper">
            <div class="auth-header">
                <a href="index.html" class="logo">
                    <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    <span>NS TRAVELS</span>
                </a>
                
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
            
            <div class="auth-content">
                <div class="auth-card">
                    <div class="card-header">
                        <h1 class="auth-title">Welcome Back</h1>
                        <p class="auth-subtitle">Sign in to continue your travel journey</p>
                    </div>
                    
                    <form class="auth-form" id="userLoginForm">
                        <div class="form-group">
                            <label for="userName">User Name</label>
                            <div class="input-wrapper">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                    <polyline points="22,6 12,13 2,6"></polyline>
                                </svg>
                                <input type="text" id="userName" placeholder="John Doe" required>
                            </div>
                            <div class="error-message" id="userEmailError"></div>
                        </div>
                        
                        <div class="form-group">
                            <div class="label-wrapper">
                                <label for="userPassword">Password</label>
                                <a href="#" class="forgot-password">Forgot Password?</a>
                            </div>
                            <div class="input-wrapper">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>
                                <input type="password" id="userPassword" placeholder="••••••••" required>
                                <button type="button" class="toggle-password" aria-label="Toggle password visibility">
                                    <svg class="eye-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                    <svg class="eye-off-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                        <line x1="1" y1="1" x2="23" y2="23"></line>
                                    </svg>
                                </button>
                            </div>
                            <div class="error-message" id="userPasswordError"></div>
                        </div>
                        
                        <div class="form-group remember-me">
                            <label class="checkbox-container">
                                <input type="checkbox" id="userRememberMe">
                                <span class="checkmark"></span>
                                <span class="checkbox-label">Remember me</span>
                            </label>
                        </div>
                        
                        <button type="submit" class="btn-submit">
                            <span class="btn-text">Sign In</span>
                            <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                <polyline points="12 5 19 12 12 19"></polyline>
                            </svg>
                            <div class="btn-loader"></div>
                        </button>
                    </form>
                    
                    <div class="social-login">
                        <p class="social-text">Or sign in with</p>
                        <div class="social-buttons">
                            <button class="social-btn google">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                                    <path fill="#4285F4" d="M5.26620003,9.76452941 C6.19878754,6.93863203 8.85444915,4.90909091 12,4.90909091 C13.6909091,4.90909091 15.2181818,5.50909091 16.4181818,6.49090909 L19.9090909,3 C17.7818182,1.14545455 15.0545455,0 12,0 C7.27006974,0 3.1977497,2.69829785 1.23999023,6.65002441 L5.26620003,9.76452941 Z"></path>
                                    <path fill="#34A853" d="M16.0407269,18.0125889 C14.9509167,18.7163016 13.5660892,19.0909091 12,19.0909091 C8.86648613,19.0909091 6.21911939,17.076871 5.27698177,14.2678769 L1.23746264,17.3349879 C3.19279051,21.2936293 7.26500293,24 12,24 C14.9328362,24 17.7353462,22.9573905 19.834192,20.9995801 L16.0407269,18.0125889 Z"></path>
                                    <path fill="#4A90E2" d="M19.834192,20.9995801 C22.0291676,18.9520994 23.4545455,15.903663 23.4545455,12 C23.4545455,11.2909091 23.3454545,10.5272727 23.1818182,9.81818182 L12,9.81818182 L12,14.4545455 L18.4363636,14.4545455 C18.1187732,16.013626 17.2662994,17.2212117 16.0407269,18.0125889 L19.834192,20.9995801 Z"></path>
                                    <path fill="#FBBC05" d="M5.27698177,14.2678769 C5.03832634,13.556323 4.90909091,12.7937589 4.90909091,12 C4.90909091,11.2182781 5.03443647,10.4668121 5.26620003,9.76452941 L1.23999023,6.65002441 C0.43658717,8.26043162 0,10.0753848 0,12 C0,13.9195484 0.444780743,15.7301709 1.23746264,17.3349879 L5.27698177,14.2678769 Z"></path>
                                </svg>
                            </button>
                            <button class="social-btn facebook">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                                    <path fill="#1877F2" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                                </svg>
                            </button>
                            <button class="social-btn twitter">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                                    <path fill="#1DA1F2" d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723 10.054 10.054 0 01-3.127 1.184 4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="auth-footer">
                        <p>Don't have an account? <a href="user-signup.html" class="auth-link">Sign up</a></p>
                    </div>
                </div>
                
                <div class="auth-image">
                    <img src="images/log5.jpg" alt="Beautiful beach destination">
                    <div class="image-overlay"></div>
                    <div class="image-caption">
                        <h3>Discover Your Next Adventure</h3>
                        <p>Sign in to access exclusive travel deals and personalized recommendations</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="floating-elements">
            <div class="float-element plane">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17.8 19.2L16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"></path>
                </svg>
            </div>
            <div class="float-element compass">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>
                </svg>
            </div>
            <div class="float-element map">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
                    <line x1="8" y1="2" x2="8" y2="18"></line>
                    <line x1="16" y1="6" x2="16" y2="22"></line>
                </svg>
            </div>
            <div class="float-element suitcase">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="8" width="18" height="12" rx="2" ry="2"></rect>
                    <path d="M7 8V5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v3"></path>
                    <line x1="12" y1="12" x2="12" y2="16"></line>
                    <line x1="8" y1="16" x2="16" y2="16"></line>
                </svg>
            </div>
            <div class="float-element palm-tree">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v20M4.93 10H7.5c.55 0 1.5-.15 1.5-2s-.95-2-1.5-2H5.93a2 2 0 0 1-2-2c0-1.1.9-2 2-2h3.5M19.07 10H16.5c-.55 0-1.5-.15-1.5-2s.95-2 1.5-2h2.07a2 2 0 0 0 2-2c0-1.1-.9-2-2-2h-3.5"></path>
                </svg>
            </div>
            <div class="float-element beach">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M8.44 12h.04c.93-.46 1.77-.46 2.7 0h.04c.93-.46 1.77-.46 2.7 0h.04c.93-.46 1.77-.46 2.7 0h.04c.93-.46 1.77-.46 2.7 0H20M6.79 10h.12c.53-.27 1.01-.27 1.54 0h.12c.53-.27 1.01-.27 1.54 0h.12c.53-.27 1.01-.27 1.54 0h.12c.53-.27 1.01-.27 1.54 0h.12c.53-.27 1.01-.27 1.54 0h.12c.53-.27 1.01-.27 1.54 0h.12M3 8h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06c.27-.13.51-.13.78 0h.06M15 13v8M8 21l7-8"></path>
                </svg>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Theme Toggle
            const themeToggle = document.getElementById("theme-toggle");
            const htmlElement = document.documentElement;

            const savedTheme = localStorage.getItem("theme");
            const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;

            if (savedTheme === "dark" || (!savedTheme && systemPrefersDark)) {
                htmlElement.classList.add("dark-mode");
            }

            if (themeToggle) {
                themeToggle.addEventListener("click", function () {
                    htmlElement.classList.toggle("dark-mode");
                    localStorage.setItem("theme", htmlElement.classList.contains("dark-mode") ? "dark" : "light");
                });
            }

            // Password Toggle
            document.querySelectorAll(".toggle-password").forEach(button => {
                button.addEventListener("click", function () {
                    const input = this.previousElementSibling;
                    if (input) {
                        input.type = input.type === "password" ? "text" : "password";
                        this.classList.toggle("active");
                    }
                });
            });

            // Form Validation and AJAX Login
            const userLoginForm = document.getElementById("userLoginForm");
            if (userLoginForm) {
                userLoginForm.addEventListener("submit", async function (e) {
                    e.preventDefault();

                    const usernameInput = document.getElementById("userName");
                    const passwordInput = document.getElementById("userPassword");
                    const usernameError = document.getElementById("userEmailError");
                    const passwordError = document.getElementById("userPasswordError");

                    if (usernameError) usernameError.textContent = "";
                    if (passwordError) passwordError.textContent = "";

                    let isValid = true;
                    if (!usernameInput.value.trim()) {
                        if (usernameError) usernameError.textContent = "Username is required";
                        isValid = false;
                    }
                    if (!passwordInput.value.trim()) {
                        if (passwordError) passwordError.textContent = "Password is required";
                        isValid = false;
                    }

                    if (!isValid) return;

                    const btnSubmit = this.querySelector(".btn-submit");
                    btnSubmit.classList.add("loading");

                    try {
                        const response = await fetch("http://localhost:8080/auth/login/verify", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({
                                username: usernameInput.value.trim(),
                                password: passwordInput.value.trim(),
                                role: "USER"
                            })
                        });

                        if (!response.ok) {
                            throw new Error("Invalid username or password");
                        }

                        const data = await response.json();
                        if (data.token) {
                            localStorage.setItem("jwtToken", data.token);
                            window.location.href = "index.html";
                        } else {
                            if (usernameError) usernameError.textContent = data.message || "Login failed";
                        }
                    } catch (error) {
                        if (passwordError) passwordError.textContent = error.message;
                    } finally {
                        btnSubmit.classList.remove("loading");
                    }
                });
            }

            // Ripple Effect on Buttons
            document.querySelectorAll(".btn-submit, .social-btn").forEach(button => {
                button.addEventListener("click", function (e) {
                    const ripple = document.createElement("span");
                    ripple.classList.add("ripple");
                    ripple.style.left = `${e.clientX - this.getBoundingClientRect().left}px`;
                    ripple.style.top = `${e.clientY - this.getBoundingClientRect().top}px`;
                    this.appendChild(ripple);
                    setTimeout(() => ripple.remove(), 600);
                });
            });

            // Input Focus Effects
            document.querySelectorAll("input").forEach(input => {
                input.addEventListener("focus", () => input.parentElement.classList.add("input-focused"));
                input.addEventListener("blur", () => input.parentElement.classList.remove("input-focused"));
            });

            // Light Effects
            document.querySelectorAll(".light-ray").forEach((ray, index) => {
                ray.style.animationDelay = `${index * 2}s`;
            });
            document.querySelectorAll(".light-glow").forEach((glow, index) => {
                glow.style.animationDelay = `${index * 3}s`;
            });

            // Floating Elements
            document.querySelectorAll(".float-element").forEach(element => {
                const randomX = Math.random() * 20 - 10;
                const randomY = Math.random() * 20 - 10;
                element.style.transform = `translate(${randomX}px, ${randomY}px)`;
            });
        });


    </script>
</body>
</html>

